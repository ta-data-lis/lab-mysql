# CUSTOMERS
# EACH CUSTOMER IS UNIQUE
# ONE CUSTOMER CAN BE INVOICED (i) ONE MODEL/ONE CAR, (ii)  MULTIPLE CARS FROM SAME MODEL and (iii) SEVERAL MODELS WITH SINGLE OR MULTIPLE CARS

# SALESPERSONS
# EACH SALESPERSON IS UNIQUE
# ONE SALESPERSON CAN INVOICE (i) ONE MODEL/ONE CAR, (ii)  MULTIPLE CARS FROM SAME MODEL and (iii) MULTIPLE MODELS WITH SINGLE OR MULTIPLE CARS

# INVOICES
# EACH INVOICE IS UNIQUES
# ONE INVOICE REFERS TO ONE CUSTOMER (NOTE: CUSTOMER CAN BE DIFERENT FROM ONE INVOICE TO ANOTHER INVOICE)
# ONE INVOICE REFERS TO ONE SALESPERSON (NOTE: SALESPERSON CAN BE DIFERENT FROM ONE INVOICE TO ANOTHER INVOICE)
# ONE INVOICE CAN REFERS TO (i) ONE MODEL /ONE CAR OR (ii) MULTIPLE CARS FROM SAME MODEL OR (iii) MULTIPLE MODELS WITH SINGLE OR MULTIPLE CARS

# EACH CAR IS UNIQUE
# ONE CAR  IS RELATED TO A ONE SINGLE MODEL
# EACH CAR CAN BE INVOICED ONLY ONCE TO  A SINGLE CUSTOMER BY A SINGLE SALESPERSON
# ONE MODEL CAN BE INVOICED ONE TIME IN THE SAME INVOICE
# DIFERENT MODELS CAN BE INVOICED ONE TIME IN THE SAME INVOICE
# ONE MODEL CAN BE INVOICED MULTIPLE TIMES IN THE SAME INVOICE
# DIFERENT MODELS CAN BE INVOICED MULTIPLE TIMES IN THE SAME INVOICE
# ONE MODEL CAN BE INVOICED MULTIPLE TIMES IN DIFFERENT INVOICES
# DIFERENT MODELS CAN BE INVOICED MULTIPLE TIMES IN DIFFERENT INVOICES

CREATE DATABASE IF NOT EXISTS lab_mysql;

USE lab_mysql;

CREATE TABLE IF NOT EXISTS Cars (
  carID INT NOT NULL AUTO_INCREMENT, 
  VIN VARCHAR(52), 
  Manufacturer VARCHAR(52), 
  Model VARCHAR(52), 
  Year INT, 
  Color VARCHAR(52),
  PRIMARY KEY (CarID)
);
USE lab_mysql;
ALTER TABLE cars AUTO_INCREMENT=0, algorithm=inplace;

CREATE TABLE IF NOT EXISTS Customers (
  customerID INT NOT NULL AUTO_INCREMENT,
  ClientID INT,
  Name VARCHAR(52), 
  Phone VARCHAR(52), 
  Email VARCHAR(52) DEFAULT 'General@cars.com', 
  Address VARCHAR(52), 
  City VARCHAR(52), 
  StateProvince VARCHAR(52), 
  Country VARCHAR(52), 
  PostalCode VARCHAR(52),
  PRIMARY KEY (CustomerID)
);
USE lab_mysql;
ALTER TABLE customers AUTO_INCREMENT=0, algorithm=inplace;

CREATE TABLE IF NOT EXISTS Salespersons (
  SalespersonID INT NOT NULL AUTO_INCREMENT, 
  StaffID INT, 
  Name VARCHAR(52), 
  Store VARCHAR(52),
  PRIMARY KEY (SalespersonID)
  );
  USE lab_mysql;
  ALTER TABLE salespersons AUTO_INCREMENT=0, algorithm=inplace;
    
CREATE TABLE IF NOT EXISTS Invoices (
  InvoiceID INT NOT NULL AUTO_INCREMENT, 
  InvoiceNumber INT, 
  Date DATE, 
  CarID INT, 
  CustomerID INT, 
  SalespersonID INT,
  PRIMARY KEY (InvoiceID),
  FOREIGN KEY (CarID) REFERENCES Cars(CarID),
  FOREIGN KEY (SalespersonID) REFERENCES Salespersons(SalespersonID),
  FOREIGN KEY (CustomerID) REFERENCES Customers(CustomerID)
  );
  USE lab_mysql;
  ALTER TABLE invoices AUTO_INCREMENT=0, algorithm=inplace;